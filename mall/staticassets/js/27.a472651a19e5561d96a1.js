webpackJsonp([27],{T13b:function(t,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=o("gyMJ"),a=(o("efG5"),o("efG5"),{name:"WealthPassword",data:function(){return{routeData:{},is_password:!0,shopPhone:"",time:180,beginning:!1,code:"",old_password:"",password:"",confirm_password:""}},created:function(){this.routeData=this.$route.params,console.log(this.routeData),this.is_password=this.routeData.haspassword},mounted:function(){this.checkShopSetting()},methods:{checkShopSetting:function(){var t=this;Object(e.i)({shop_id:this.routeData.shopid}).then(function(s){console.log("查看店铺设置信息",s),1==s.data.code&&(""==s.data.data.phone?t.feedback.Confirm({title:"温馨提示",msg:"系统检测到您的店铺信息未绑定手机号，请先绑定手机号才能（设置/修改）支付密码",options:[{txt:"取消",color:"#999",callback:function(){t.$router.go(-1)}},{txt:"确定",color:"#0bb20c",callback:function(){}}]}):t.shopPhone=s.data.data.phone)})},submitPasswordSet:function(t){var s=this;Object(e.Y)(t).then(function(t){console.log("设置密码",t),s.feedback.Toast({msg:t.data.info,timeout:1500}),1==t.data.code&&setTimeout(function(){s.$router.back(-1)},1500)})},submitPasswordChange:function(t){var s=this;Object(e.X)(t).then(function(t){console.log("修改密码",t),s.feedback.Toast({msg:t.data.info,timeout:1500}),1==t.data.code&&setTimeout(function(){s.$router.back(-1)},1500)})},goSubmit:function(){if(""==this.code)this.feedback.Toast({msg:"请输入验证码",timeout:1500});else if(""==this.old_password&&this.is_password)this.feedback.Toast({msg:"请输入旧的提现密码",timeout:1500});else if(""==this.password)this.feedback.Toast({msg:"请输入提现密码",timeout:1500});else if(""==this.confirm_password)this.feedback.Toast({msg:"请确认提现密码",timeout:1500});else if(6!=this.password.length||6!=this.confirm_password.length)this.feedback.Toast({msg:"提现密码应由6位数字组成",timeout:1500});else if(this.password!=this.confirm_password)this.feedback.Toast({msg:"两次输入的提现密码不一致",timeout:1500});else{var t={};t.password=this.password,t.confirm_password=this.confirm_password,t.code=this.code,t.shop_id=this.routeData.shopid,this.is_password?(t.old_password=this.old_password,this.submitPasswordChange(t)):(t.old_password="",this.submitPasswordSet(t))}},sendAdminCode:function(){var t=this;this.beginning||(this.feedback.Loading.open("发送中"),Object(e.T)({mobile:this.shopPhone,name:this.is_password?"set_transaction_password":"change_transaction_password"}).then(function(s){t.feedback.Loading.close(),console.log("发送验证码",s),1==s.data.code&&(t.beginning=!0,t.timer=setInterval(function(){var s=t.time;if(0==s)return clearInterval(t.timer),void(t.beginning=!1);t.time=s-1},1e3))}))}},components:{}}),i={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"container"},[o("div",{staticClass:"input-box-wapper"},[o("div",{staticClass:"input-box-type1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.shopPhone,expression:"shopPhone"}],attrs:{type:"number",bindinput:"recordPhoneNumber",placeholder:"",disabled:""},domProps:{value:t.shopPhone},on:{input:function(s){s.target.composing||(t.shopPhone=s.target.value)}}})]),t._v(" "),o("div",{staticClass:"input-box-type1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{"placeholder-style":"color:#ccc",maxlength:"6",type:"number",name:"code",placeholder:"验证码"},domProps:{value:t.code},on:{input:function(s){s.target.composing||(t.code=s.target.value)}}}),t._v(" "),o("div",{staticClass:"btn",style:{color:t.beginning?"#cccccc":"#000000"},on:{click:t.sendAdminCode}},[t._v(t._s(t.beginning?"倒计时"+t.time+"s":"发送验证码"))])])]),t._v(" "),o("div",{staticClass:"input-box-wapper"},[t.is_password?o("div",{staticClass:"input-box-type1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.old_password,expression:"old_password"}],attrs:{"placeholder-style":"color:#ccc",type:"password",name:"old_password",placeholder:"请输入旧的提现密码"},domProps:{value:t.old_password},on:{input:function(s){s.target.composing||(t.old_password=s.target.value)}}})]):t._e(),t._v(" "),o("div",{staticClass:"input-box-type1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{"placeholder-style":"color:#ccc",type:"password",name:"password",placeholder:"请输入提现密码"},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),t._v(" "),o("div",{staticClass:"input-box-type1"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm_password,expression:"confirm_password"}],attrs:{"placeholder-style":"color:#ccc",type:"password",name:"confirm_password",placeholder:"再次确认提现密码"},domProps:{value:t.confirm_password},on:{input:function(s){s.target.composing||(t.confirm_password=s.target.value)}}})])]),t._v(" "),o("div",{staticClass:"footer"},[o("button",{staticClass:"btn",attrs:{"form-type":"submit"},on:{click:t.goSubmit}},[t._v("确认修改")])])])},staticRenderFns:[]};var n=o("vSla")(a,i,!1,function(t){o("aHm6")},"data-v-50bbd438",null);s.default=n.exports},aHm6:function(t,s){}});
//# sourceMappingURL=27.a472651a19e5561d96a1.js.map