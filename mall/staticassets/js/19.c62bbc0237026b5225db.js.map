{"version":3,"sources":["webpack:///./src/pages/AdminShopCard/AdminShopCard.vue","webpack:///./src/pages/AdminShopCard/AdminShopCard.vue?7533","webpack:///./src/pages/AdminShopCard/AdminShopCard.vue?b953"],"names":["__WEBPACK_IMPORTED_MODULE_1_axios__","__webpack_require__","n","__WEBPACK_IMPORTED_MODULE_1_axios___default","__webpack_exports__","name","data","shopInfo","imgs","imgData","accept","viewImgs","filedata","Object","beforeCreate","created","mounted","this","getAdminIndexInfo","methods","_this","__WEBPACK_IMPORTED_MODULE_0__api_index_js__","user_id","$store","state","user","userid","then","res","code","background","handleChooseImg","e","_this2","fileType","target","files","type","console","log","indexOf","sourceObj","dataset","index","srcElement","window","URL","createObjectURL","item","file","param","FormData","append","get","a","post","global","host","headers","Content-Type","response","id","changeShopBanner","feedback","Toast","msg","icon","timeout","_this3","shop_id","info","components","pages_AdminShopCard_AdminShopCard","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","src","_v","on","change","_s","shop_name","qrcode","staticRenderFns","__vue_styles__","ssrContext","Component","normalizeComponent","AdminShopCard_AdminShopCard"],"mappings":"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","file":"staticassets/js/19.c62bbc0237026b5225db.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n\r\n\r\nimport { getAdminIndexInfo,publicUploadImg,changeShopBanner } from '@/api/index.js';\r\nconst wx = require('weixin-js-sdk');\r\n// 创建本地地址\r\nconst getFileUrl = (sourceObj) => { return window.URL.createObjectURL(sourceObj.files.item(0)); };\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n    name: 'AdminShopCard',\r\n    data() {\r\n        return {\r\n            shopInfo:{},\r\n            imgs: [],\r\n            imgData: {\r\n                accept: 'image/gif, image/jpeg, image/png, image/jpg',\r\n            },\r\n            accept: 'image/gif,image/jpeg,image/png,image/jpg',\r\n            viewImgs: '',\r\n            filedata:Object,\r\n        };\r\n    },\r\n    beforeCreate() {\r\n    },\r\n    created(){\r\n        \r\n    },\r\n    mounted() {\r\n        this.getAdminIndexInfo();\r\n    },\r\n    methods:{\r\n        getAdminIndexInfo() {\r\n            getAdminIndexInfo({\r\n                user_id: this.$store.state.user.userid,\r\n            }).then(res => {\r\n                //console.log('虚拟店信息',res)\r\n                if (res.data.code == 1) {\r\n                    this.shopInfo = res.data.data;\r\n                    this.viewImgs = res.data.data.background\r\n                }\r\n            });\r\n        },\r\n        //选择图片\r\n        handleChooseImg(e) {\r\n            let fileType = e.target.files[0].type;\r\n            console.log(this.filedata)\r\n            // 匹配文件类型\r\n            if (this.accept.indexOf(fileType) == -1 || fileType == '') {\r\n                this.feedback.Toast({\r\n                    msg: '请选择正确的文件类型',\r\n                    icon: 'error',\r\n                    timeout: 1500\r\n                 });\r\n                return;\r\n            }\r\n            //this.feedback.Loading.open('操作中');\r\n            // 将选择的图片显示到页面中\r\n            let index = e.target.dataset.index * 1;\r\n            this.viewImgs = getFileUrl(e.srcElement)\r\n            \r\n            //上传图片\r\n            let file = e.target.files[0]\r\n            let param = new FormData()  // 创建form对象\r\n            param.append('file', file, file.name)  // 通过append向form对象添加数据\r\n            //param.append('chunk', '0') // 添加form表单中其他数据\r\n            console.log(param.get('file')) // FormData私有类对象，访问不到，可以通过get判断值是否传进去\r\n            let config = {\r\n              headers: {'Content-Type': 'multipart/form-data'}\r\n            }\r\n            axios.post(global.host+'/api/5b0bee5c49e21', param, config)\r\n            .then(response => {\r\n                if (response.data.code == 1) {\r\n                    console.log(response.data.data.id)\r\n                    this.changeShopBanner(response.data.data.id)\r\n                }\r\n                console.log(response.data)\r\n            })\r\n        },\r\n        //更换店铺背景图\r\n        changeShopBanner(id){\r\n            changeShopBanner({\r\n                shop_id: this.shopInfo.id,\r\n                background: id\r\n            }).then(res=>{\r\n                this.feedback.Toast({  msg:res.data.info,  timeout:1500 });\r\n                this.getAdminIndexInfo();\r\n                console.log('更换门店名片背景图',res)\r\n            })\r\n        }\r\n    },\r\n    components: {\r\n    }\r\n};\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/AdminShopCard/AdminShopCard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header\"},[_c('img',{attrs:{\"src\":_vm.viewImgs != '' ? _vm.viewImgs : '../images/poster.jpg'}}),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('input',{staticClass:\"upload\",attrs:{\"type\":\"file\",\"accept\":_vm.accept},on:{\"change\":_vm.handleChooseImg}}),_vm._v(\"更换\")])]),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.shopInfo.shop_name))]),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.shopInfo.qrcode}}),_vm._v(\" \"),_c('div',{staticClass:\"remark\"},[_vm._v(\"扫码进店\")])])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-779f5800\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/pages/AdminShopCard/AdminShopCard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-779f5800\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/after-less-loader.js!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/style-loader.js!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./AdminShopCard.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./AdminShopCard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./AdminShopCard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-779f5800\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./AdminShopCard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-779f5800\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/AdminShopCard/AdminShopCard.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}